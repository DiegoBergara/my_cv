---
import AnimatedTitle from '@/components/AnimatedTitle';
import LiquidEtherBackground from '@/components/LiquidEtherBackground';
import { Button } from '@/components/ui/button';
import { content, profileData, type Locale, siteConfig, supportedLocales } from '@/config/site';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const t = content[locale];

const localizedPath = (target: Locale) => (target === 'es' ? '/' : `/${target}/`);
---

<main class="relative min-h-screen text-white" style={`background: ${siteConfig.theme.gradientFallback}`}>
  <LiquidEtherBackground className="pointer-events-none fixed inset-0 -z-20 hidden md:block" client:load />
  <div class="fixed inset-0 -z-10 bg-black/35"></div>

  <header class="mx-auto flex w-full max-w-6xl items-center justify-between px-4 py-6 md:px-6">
    <a href={localizedPath(locale)} class="text-lg font-semibold tracking-tight">{profileData.name}</a>
    <nav class="hidden gap-4 text-sm md:flex">
      <a href="#about">{t.nav[1]}</a>
      <a href="#projects">{t.nav[2]}</a>
      <a href="#timeline">{t.nav[3]}</a>
      <a href="#contact">{t.nav[4]}</a>
    </nav>
    <div class="flex items-center gap-2 text-xs">
      {supportedLocales.map((loc) => (
        <a href={localizedPath(loc)} class={`rounded border px-2 py-1 ${loc === locale ? 'border-cyan-300 bg-cyan-300/20' : 'border-white/25'}`}>
          {loc.toUpperCase()}
        </a>
      ))}
    </div>
  </header>

  <section class="mx-auto grid min-h-[86vh] max-w-6xl content-center gap-6 px-4 pb-14 pt-16 md:px-6">
    <p class="w-fit rounded-full border border-white/20 bg-white/5 px-3 py-1 text-sm">{t.hero.badge}</p>
    <AnimatedTitle text={t.hero.title} className="max-w-4xl text-3xl font-bold leading-tight md:text-6xl" client:load />
    <p class="max-w-3xl text-base text-white/80 md:text-xl">{t.hero.subtitle}</p>
    <div class="flex flex-col gap-3 sm:flex-row">
      <Button asChild size="lg"><a href={t.hero.ctas[0].href}>{t.hero.ctas[0].label}</a></Button>
      <Button asChild variant="outline" size="lg"><a href={t.hero.ctas[1].href} target="_blank" rel="noreferrer">{t.hero.ctas[1].label}</a></Button>
    </div>
  </section>

  <section id="about" class="mx-auto max-w-6xl px-4 py-14 md:px-6">
    <h2 class="section-title">{t.sections.aboutTitle}</h2>
    <p class="mt-4 max-w-4xl text-white/85">{t.sections.aboutBody}</p>
    <p class="mt-4 text-white/70">{profileData.education}</p>
  </section>

  <section class="mx-auto max-w-6xl px-4 py-14 md:px-6">
    <h2 class="section-title">{t.sections.stackTitle}</h2>
    <div class="mt-5 flex flex-wrap gap-2">
      {profileData.stacks.map((item) => <span class="chip">{item}</span>)}
    </div>
  </section>

  <section id="projects" class="mx-auto max-w-6xl px-4 py-14 md:px-6">
    <h2 class="section-title">{t.sections.projectsTitle}</h2>
    <div class="mt-6 grid gap-4 md:grid-cols-2">
      {profileData.projects.map((project) => (
        <article class="card">
          <h3 class="text-xl font-semibold">{project.title}</h3>
          <p class="mt-2 text-white/80">{project.impact}</p>
          <div class="mt-4 flex flex-wrap gap-2">
            {project.tags.map((tag: string) => <span class="chip">{tag}</span>)}
          </div>
        </article>
      ))}
    </div>
  </section>

  <section id="timeline" class="mx-auto max-w-6xl px-4 py-14 md:px-6">
    <h2 class="section-title">{t.sections.timelineTitle}</h2>
    <div class="mt-6 space-y-4 border-l border-cyan-200/40 pl-6">
      {profileData.timeline.map((step) => (
        <article class="relative rounded-xl border border-white/10 bg-white/5 p-4">
          <span class="absolute -left-[31px] top-5 h-3 w-3 rounded-full bg-cyan-300"></span>
          <p class="text-sm text-cyan-200">{step.period}</p>
          <h3 class="mt-1 font-semibold">{step.title}</h3>
          <p class="mt-2 text-white/80">{step.detail}</p>
        </article>
      ))}
    </div>
  </section>

  <section class="mx-auto max-w-6xl px-4 py-14 md:px-6">
    <h2 class="section-title">{t.sections.accessibilityTitle}</h2>
    <div class="mt-6 grid gap-4 rounded-2xl border border-white/10 bg-black/30 p-6 md:grid-cols-3">
      <div class="diagram-node">Semantic HTML + ARIA</div>
      <div class="diagram-node">Contraste AA + Focus states</div>
      <div class="diagram-node">Keyboard-first navigation</div>
      <div class="diagram-node md:col-span-3">Reduced motion + responsive UI + Lighthouse-friendly SEO</div>
    </div>
  </section>

  <section id="contact" class="mx-auto max-w-6xl px-4 py-16 md:px-6">
    <h2 class="section-title">{t.sections.contactTitle}</h2>
    <div class="mt-4 flex flex-col gap-3 sm:flex-row">
      <Button asChild><a href="mailto:diegobergaraj@gmail.com">diegobergaraj@gmail.com</a></Button>
      <Button asChild variant="outline"><a href={siteConfig.seo.calendly} target="_blank" rel="noreferrer">Calendly Â· 30 min</a></Button>
    </div>
  </section>
</main>
